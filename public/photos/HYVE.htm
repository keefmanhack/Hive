<!DOCTYPE html>
<!-- saved from url=(0051)http://localhost:3000/user/5ecbd77f626231786fd338ee -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" type="text/css" href="./HYVE_files/landing.css">
	<link rel="stylesheet" type="text/css" href="./HYVE_files/all.css">
	<link rel="stylesheet" type="text/css" href="./HYVE_files/results.css">
	<link rel="stylesheet" type="text/css" href="./HYVE_files/profile.css">
	<link rel="stylesheet" type="text/css" href="./HYVE_files/photo-editor.css">
	<link rel="stylesheet" type="text/css" href="./HYVE_files/photo-selector.css">

	<link rel="stylesheet" href="./HYVE_files/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<link rel="stylesheet" href="./HYVE_files/all(1).css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous">

	<script src="./HYVE_files/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="./HYVE_files/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="./HYVE_files/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>



	<title>HYVE</title>
</head>
<body>
	<div id="top-bar">
		<div class="row">
			<div id="logo" class="col-sm-2">
				<a href="http://localhost:3000/">
					<img src="./HYVE_files/logo_invert.jpeg">
				</a>
			</div>
			<div class="col-sm-4">
				<form id="search" action="http://localhost:3000/searchResult" method="GET">
					<input type="text" class="form-control" id="search" placeholder="Musician, Comedian, Artist" name="search">
					<input style="display: none" id="find-talent" class="btn btn-primary" type="submit" value="Find Talent" name="">
				</form>
			</div>
			
				<div class="col-sm-4">

				</div>
				<a href="http://localhost:3000/user/5ecbd77f626231786fd338ee">
					</a><div class="col-sm-2 logged-in" id="user"><a href="http://localhost:3000/user/5ecbd77f626231786fd338ee">
						<div class="row" id="drop-down">
							<div class="col">
								
									<img id="user-image" src="./HYVE_files/cropped_profile.jpg">
								
							</div>
							<div class="col" id="hello-user">
								<h5>Hello,</h5>
								<h2 class="truncate">Keefer <i class="fas fa-caret-down"></i></h2>								
							</div>
						</div>
						<div class="row arrow-up white on-top"></div>
						</a><div class="row" id="drop-down-menu"><a href="http://localhost:3000/user/5ecbd77f626231786fd338ee">
							</a><ul><a href="http://localhost:3000/user/5ecbd77f626231786fd338ee">
								</a><li><a href="http://localhost:3000/user/5ecbd77f626231786fd338ee"></a><a href="http://localhost:3000/user/5ecbd77f626231786fd338ee">View Profile</a></li><a href="http://localhost:3000/user/5ecbd77f626231786fd338ee">
								</a><li><a href="http://localhost:3000/user/5ecbd77f626231786fd338ee"></a><a href="http://localhost:3000/sign_out">Sign Out</a></li>
							</ul>
						</div>
					</div>
				
			
		</div>
	</div>



<div class="page-container" id="profile-page">
	<div id="top-section">
		<div id="user-info">
			<div id="profile-image">
				
					<img src="./HYVE_files/cropped_profile.jpg">
					
			</div>
			<i class="fas fa-camera"></i>
			<h1><strong>Keefer Gregoire</strong></h1>
		</div>

		<hr>
		<div class="row" id="profile-nav">
			<div class="col-auto">
				<button id="talents-button" class="active btn btn-primary">Talents</button>
			</div>
			<div class="col-auto">
				<button id="about-button" class="btn btn-primary">About</button>
			</div>
			<div class="col-auto">
				<button class="btn btn-primary">Your Hive</button>
			</div>
			<div class="col-auto">
				<button class="btn btn-primary">Financials</button>
			</div>
			<div class="col-auto">
				<button class="btn btn-primary">More info</button>
			</div>		
		</div>
	</div>
	<div class="content-section">
		<div id="about">
			<div class="row">
				<div class="col-lg-3 left">
					<h1>About</h1>
					<ul>
						<li onclick="menuChange(this);" class="">Bio</li>
						<li onclick="menuChange(this);" class="">Work</li>
						<li onclick="menuChange(this);" class="active">Eduation</li>
					</ul>
				</div>
				<div class="col right">
					<div id="bio" class="active">
						<form on="" action="http://localhost:3000/user/5ecbd77f626231786fd338ee/edit/about" method="POST">
							<textarea name="about[bio]" disabled="">This is the bio</textarea>
							<div class="row">
								<div class="col-lg-3">
									<button type="button" onclick="bioEditable();" id="edit" class="strip btn btn-primary">Edit</button>
								</div>
								<div class="col-lg-5">
									<!-- Im empty on purpose -->
								</div>
								<div class="col-lg-2">
									<button type="button" onclick="bioNotEditable();" id="cancel" class="strip btn btn-primary">Cancel</button>
								</div>
								<div class="col-lg-2">
									<button id="save" class="strip btn btn-primary">Save</button>
								</div>
							</div>
						</form>
					</div>
					<div id="work">
						<h2>Work</h2>
						<button>Add a workplace</button>
						<ul>
							<li>
								work 1
							</li>
							<li>
								Work 2
							</li>
						</ul>
						<h2>Education</h2>
						<button>Add a school</button>
						<ul>
							<li>
								School 1
							</li>
							<li>
								School 2
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="photo-selector" id="photo-new-or-edit">
	<div class="row">
		<div class="col-lg-10">
			<h1>Update Profile Picture</h1>
		</div>
		<div class="col-lg-2">
			<h1>
				<i class="fas fa-times-circle"></i>
			</h1>				
		</div>
	</div>	
	<hr>
	<div class="row">
		<div class="col">
			<button id="new-photo" class="btn btn-primary">+  Upload New Photo</button>
		</div>
		<div class="col">
							<button onclick="editPhoto({ orient: { dimension: &#39;79%&#39;, top: &#39;44px&#39;, left: &#39;-21px&#39; },
  cropped_profile_path: &#39;/uploads/profiles/5ecbd77f626231786fd338ee/cropped_profile.jpg&#39;,
  profile_path: &#39;/uploads/profiles/5ecbd77f626231786fd338ee/profile.jpg&#39; });" id="edit-photo" class="btn btn-primary"><i class="fas fa-pen"></i></button>
					</div>

	</div>
	<div class="row">
		<div class="col">
			<h2>Previous Photo</h2>
		</div>
	</div>
</div>
<div class="photo-selector" id="photo-editor">
	<div class="row">
		<div class="col-lg-10">
			<h1>Update Profile Picture</h1>
		</div>
		<div class="col-lg-2">
			<h1>
				<i class="fas fa-times-circle"></i>
			</h1>				
		</div>
	</div>	
	<hr>
	<div id="photo">
		
			<img id="profile_img" src="http://localhost:3000/user/5ecbd77f626231786fd338ee">

			<div class="cut-out">
				
			</div>
			<div class="loader">
				<ul>
					<li>
						<i id="one" class="far fa-circle"></i>
					</li>
					<li>
						<i id="two" class="far fa-circle"></i>
					</li>
					<li>
						<i id="three" class="far fa-circle"></i>
					</li>
					<li>
						<i id="four" class="far fa-circle"></i>
					</li>
					<li>
						<i id="five" class="far fa-circle"></i>
					</li>
				</ul>
			</div>
	</div>
	<div class="slidecontainer">
  		<input type="range" min="50" max="200" value="50" class="slider" id="myRange">
	</div>
	<hr>
	<div class="row">
		<div class="col-lg-6">
			
		</div>
		<div class="col-lg-2">
			<button class="btn btn-primary">Cancel</button>
		</div>
		<div class="col-lg-4">
			<div onsubmit="changeVals()" id="myform">
				<input type="hidden" name="orient[dimension]" id="dimension">
				<input type="hidden" name="orient[top]" id="top_id">
				<input type="hidden" name="orient[left]" id="left_id">
				<input type="file" accept="image/x-png,image/gif,image/jpeg" onchange="readURL(this);" name="profile_image" id="profile_pic" style="display: none;">
				<button onclick="changeVals()" style="width: 100%;" class="btn btn-primary">Save</button>
			</div>
		</div>
	</div>
</div>


<script type="text/javascript">
	var editMode = false;
	var aboutRelation = {
			bio:{
				li: document.querySelectorAll('#about .left ul li')[0],
				section: $('#about .right #bio').slice(0,1)
			},
			work:{
				li: document.querySelectorAll('#about .left ul li')[1],
				section: $('#about .right #work').slice(0,1)
			},
			education:{
				li: document.querySelectorAll('#about .left ul li')[2],
				section: $('#about .right #education').slice(0,1)
			}
		} 


	function menuChange(li){
		$('#about .left li').removeClass('active');
		li.classList.add('active');

		for(x in aboutRelation){
			console.log(x.li);
			if(x.li === li){
				x.section.addClass('active');
			}else{
				x.section.removeClass('active');
			}
		}
	}

	//education
	// $('#about .right #bio').addClass('active');

	//bio
	$('#about .right #bio textarea').prop('disabled', true); 

	function bioEditable(){
		$('#about .right #bio #edit').addClass('hide');
		$('#about .right #bio #cancel').addClass('show');
		$('#about .right #bio #save').addClass('show');

		$('#about .right #bio textarea').addClass('enabled');
		$('#about .right #bio textarea').prop('disabled', false); 

	}

	function bioNotEditable(){
		$('#about .right #bio #edit').removeClass('hide');
		$('#about .right #bio #cancel').removeClass('show');
		$('#about .right #bio #save').removeClass('show');

		$('#about .right #bio textarea').removeClass('enabled');
		location.reload();
		// $('#about .right #bio textarea').prop('disabled', true); 

	}



	$('#user-info i').on('click', function(){
		$('.page-container').addClass('hide');
		$('#photo-new-or-edit').addClass('show');
	})

	$('.photo-selector i').on('click', function(){
		showMainPage();
	});

	$('#new-photo').on('click', function(){
		var input = $(document.getElementById("profile_pic"));
        input.trigger("click"); // opening dialog
        return false;
	});

	$('.slidecontainer input').on('input', function(){
		$('#photo-editor img').attr('height', this.value + '%');
	});

	function showMainPage(){
		$('.page-container').removeClass('hide');
		$('.photo-selector').removeClass('show');
		$('#photo-editor').removeClass('show');
	}

	function editPhoto(imageData){
		editMode = true;
		$('#photo-editor').toggleClass('show');
	  	$('#photo-editor img').attr('height', imageData.orient.dimension);
		document.getElementById("profile_img").style.left = imageData.orient.left;
		document.getElementById("profile_img").style.top = imageData.orient.top;
		$('.slidecontainer input').val(parseInt(imageData.orient.dimension.substring(0, imageData.orient.dimension.length-1)));

		// $("#profile_pic").val(imageData.profile_path);
		// document.getElementById('profile_pic').files[0] = imageData.profile_path;
		$('.loader').addClass('hide');
		$('#profile_img').attr('src', imageData.profile_path);

	}

	//create event listeners for drag event
	dragElement(document.getElementById("photo"),document.getElementById("profile_img"));


	function changeVals(){
		var reader = new FileReader();
		var image = new Image();
		image = document.getElementById('profile_img');
  		var canvas = document.createElement('canvas');
  		var profile_pic = document.getElementById('profile_pic').files[0];
 		
       	canvas.height = 250;
    	canvas.width = 250;

    	cropImage(canvas, image);

    	if(editMode){
    		var data = {
    			'orient[dimension]': $('#profile_img').attr('height'),
				'orient[top]': image.style.top,
				'orient[left]': image.style.left,
				'cropped_profile_image': canvas.toDataURL('image/png')
    		}
    		sendImage(data);
    	}else{
    		reader.readAsDataURL(profile_pic);

			reader.onload = function (e) {
				var data = {
					'orient[dimension]': $('#profile_img').attr('height'),
					'orient[top]': image.style.top,
					'orient[left]': image.style.left,
					'cropped_profile_image': canvas.toDataURL('image/png'),
					'profile_image': e.target.result
				}
				sendImage(data);
		    };
    	}
	}

	function cropImage(canvas, image){
		var ctx = canvas.getContext('2d');
		var imageProp = image.style;

		var widthFactor = image.naturalWidth / image.width;
    	var heightFactor = image.naturalHeight / image.height;
    	var topMove = parseInt(imageProp.top.substring(0, imageProp.top.length-2));
    	var leftMove = parseInt(imageProp.left.substring(0, imageProp.left.length-2));

		ctx.drawImage(image, (100 * widthFactor) - (leftMove * widthFactor), (37 * heightFactor) - (topMove * heightFactor), image.naturalWidth * widthFactor * (250/image.naturalHeight), 250 * heightFactor,0,0,image.naturalWidth * (250/image.naturalHeight), 250);
	}

	function sendImage(data) {
	  let urlEncodedData = "",
      urlEncodedDataPairs = [],
      name;

      for( name in data ) {
    		urlEncodedDataPairs.push( encodeURIComponent( name ) + '=' + encodeURIComponent( data[name] ) );
  	  }
   	  urlEncodedData = urlEncodedDataPairs.join( '&' ).replace( /%20/g, '+' );

	  var xmlHttpReq = false;

	  if (window.XMLHttpRequest) {
	    ajax = new XMLHttpRequest();
	  }
	  else if (window.ActiveXObject) {
	    ajax = new ActiveXObject("Microsoft.XMLHTTP");
	  }

	  ajax.open("POST", "/user/5ecbd77f626231786fd338ee/edit/");
	  ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

	  $('.loader').removeClass('hide');
	  ajax.onreadystatechange = function() {
		    if (this.readyState == 4 && this.status == 200) {
		      showMainPage();
		      location.reload();
		    }
  	  };

	  ajax.send(urlEncodedData);
	}



	function readURL(input) {
		editMode = false;
	  if (input.files && input.files[0]) {
	  	$('#photo-editor').toggleClass('show');
	  	$('#photo-editor img').attr('height', '50%');

		document.getElementById("profile_img").style.left = '0px';
		document.getElementById("profile_img").style.top = '0px';

	    var reader = new FileReader();
	    reader.onload = function (e) {
	      $('#profile_img')
	        .attr('src', e.target.result);

	      $('.loader').addClass('hide');
	    };

	    reader.readAsDataURL(input.files[0]);
	  }
	}

function dragElement(cover, elmnt) {
  var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
  if (document.getElementById(elmnt.id + "header")) {
    // if present, the header is where you move the DIV from:
    document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
  } else {
    // otherwise, move the DIV from anywhere inside the DIV:
    cover.onmousedown = dragMouseDown;
  }

  function dragMouseDown(e) {
    e = e || window.event;
    e.preventDefault();
    // get the mouse cursor position at startup:
    pos3 = e.clientX;
    pos4 = e.clientY;
    document.onmouseup = closeDragElement;
    // call a function whenever the cursor moves:
    document.onmousemove = elementDrag;
  }

  function elementDrag(e) {
    e = e || window.event;
    e.preventDefault();
    // calculate the new cursor position:
    pos1 = pos3 - e.clientX;
    pos2 = pos4 - e.clientY;
    pos3 = e.clientX;
    pos4 = e.clientY;
    // set the element's new position:
    elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
    elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
  }

  function closeDragElement() {
    // stop moving when mouse button is released:
    document.onmouseup = null;
    document.onmousemove = null;
  }
}
</script>

<div id="bottom">
	<div class="row">
		<div class="col">
			<h1><a href="http://localhost:3000/user/5ecbd77f626231786fd338ee">Page 1</a></h1>
		</div>
		<div class="col">
			<h1><a href="http://localhost:3000/user/5ecbd77f626231786fd338ee">Page 2</a></h1>
		</div>
		<div class="col">
			<h1><a href="http://localhost:3000/user/5ecbd77f626231786fd338ee">Page 3</a></h1>
		</div>
		<div class="col">
			<h1><a href="http://localhost:3000/user/5ecbd77f626231786fd338ee">Page 4</a></h1>
		</div>
		<div class="col">
			<h1><a href="http://localhost:3000/user/5ecbd77f626231786fd338ee">Page 5</a></h1>
		</div>
	</div>
	<div class="row social-links">
		<div class="col-sm-1">
			<a href="http://localhost:3000/user/5ecbd77f626231786fd338ee"><h1><i class="fab fa-instagram"></i></h1></a>
		</div>
		<div class="col-sm-1">
			<a href="http://localhost:3000/user/5ecbd77f626231786fd338ee"><h1><i class="fab fa-facebook"></i></h1></a>
		</div>
		<div class="col-sm-1">
			<a href="http://localhost:3000/user/5ecbd77f626231786fd338ee"><h1><i class="fab fa-twitter"></i></h1></a>
		</div>
	</div>
</div>

	<script type="text/javascript">
		var input = $('#search');

		input.on("keyup", function(event) {
		    if (event.keyCode === 13) {
		        event.preventDefault();
		        document.getElementById("find-talent").click();
		    }
		});
	</script>

	<script type="text/javascript">
		$('#user').on('mouseenter mouseleave', function(){
			$('.arrow-up').toggleClass('show');
			$('#drop-down-menu').toggleClass('show');
			$('#top-bar').next().toggleClass('grey-out');
		})
	</script>


</body></html>